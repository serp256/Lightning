PLAT = /Applications/XCode.app/Contents/Developer/Platforms/iPhoneOS.platform
SDK = /Developer/SDKs/iPhoneOS6.1.sdk
#OCAMLFIND = /usr/local/bin/ocamlfind -toolchain ios
OCAMLFIND = ocamlfind -toolchain ios
OCAMLOPT = $(OCAMLFIND) ocamlopt
OCAMLC = $(OCAMLFIND) ocamlc
OCAMLLIBDIR = $(shell ${OCAMLOPT} -where)
#ARCH = -arch armv7
#CC = /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang $(ARCH)
#CFLAGS = -x objective-c -std=c99 -Wno-trigraphs -fpascal-strings -Os -Wreturn-type -Wunused-variable -isysroot $(PLAT)$(SDK)  -DCAML_NAME_SPACE -fexceptions -miphoneos-version-min=5.1 -gdwarf-2 -D_FILE_OFFSET_BITS=64 -D_REENTRANT
include Makefile.common

MOBS = ios/AppDelegate.o ios/main.o 
CFLAGS += -I ../src/ios


include Makefile.in

res:
	aresmkr -concat -i Resources -o ios/LightTest/assets
	aresmkr -merge -o ios/LightTest/index ios/LightTest/assets
	rm ios/LightTest/assets.index

ios: $(TARGET).native
	cp test.native ios/LightTestBin

.DEFAULT_GOAL := ios

clean::
	rm -f LightTest/*.o
